{"version":3,"sources":["components/message.js","sound/hit.mp3","sound/miss.mp3","sound/fight.mp3","sound/winComp.mp3","sound/winPlayer.mp3","components/BattlefieldContext.jsx","components/Ship.jsx","components/ArrangeShips.jsx","components/DrawIdx.jsx","components/War.jsx","components/Battlefield.jsx","App.js","index.js"],"names":["message","ru","gameTitle","arrangeShips","arrangeShipsManual","arrangeShipsAuto","remarkLBtn","remarkRBtn","playerTurn","compTurn","begin","playerHits","playerMissed","compHits","compMissed","winPlayer","winComp","en","BattlefieldContext","React","createContext","Provider","ContextApp","children","useState","setArrangeShips","arrangeShipsMode","setArrangeShipsMode","Array","fill","map","playerBF","setPlayerBF","compBF","setCompBF","bfCoord","setBFcoord","playerShips","setPlayerShips","compShips","setCompShips","turn","setTurn","turnNum","setTurnNum","window","navigator","language","includes","lang","setLang","timeMachine","setTimeMachine","useEffect","turnInfo","JSON","stringify","store","dispatch","type","payload","useSound","mp3Hit","playHit","mp3Miss","playMiss","mp3Fight","playFight","mp3winComp","playWinComp","mp3winPlayer","playWinPlayer","getBFcoord","box","data","top","bottom","left","right","width","height","gridCol","el","idx","gridRow","elem","document","querySelector","getBoundingClientRect","n","item","i","ship","num","length","prev","concat","createShips","querySelectorAll","value","getRnd","Math","ceil","random","checkWinner","flat","filter","Ship","useContext","orientY","setOrientY","checkSetShip","shipCol","shipRow","trg","comp","putOk","e","newBF","a","coordY","coordX","undefined","onmousemove","onmouseup","setTimeout","toString","className","id","uuid","style","onDragStart","onMouseDown","button","target","shiftX","pageX","shiftY","pageY","position","zIndex","moveAt","closest","x","y","onContextMenu","ev","preventDefault","ArrangeShips","addEventListener","key","onClick","DrawIdx","gridColumn","String","fromCharCode","War","alarm","setAlarm","compLastHit","setCompLastHit","pads","shoot","evX","clientX","evY","clientY","shootCheck","body","cursor","playerBFstate","stop","j","newState","removeEventListener","console","log","bind","getState","classList","toggle","storedBFs","parse","newBFs","newPlayerBF","newCompBF","toUpperCase","Battlefield","title","href","createStore","state","action","App","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.5d0823b6.chunk.js","sourcesContent":["export const message = {\n  ru: {\n    gameTitle: \"Морской бой\",\n    arrangeShips: \"Расстановка кораблей\",\n    arrangeShipsManual: \"Вручную\",\n    arrangeShipsAuto: \"Автоматически\",\n    remarkLBtn: \"Кликните на корабль левой кнопкой мыши чтобы выбрать его\",\n    remarkRBtn: \"Кликните на корабль правой кнопкой мыши чтобы повернуть его\",\n    playerTurn: \"Ваш ход!\",\n    compTurn: \"Ход компьютера!\",\n    begin: \"Да начнётся битва!\",\n    playerHits: \"Вы попали!\",\n    playerMissed: \"Вы промахнулись!\",\n    compHits: \"Компьютер попал!\",\n    compMissed: \"Компьютер промахнулся!\",\n    winPlayer: \"Вы победили!\",\n    winComp: \"Компьютер победил!\",\n  },\n  en: {\n    gameTitle: \"Sea Battle\",\n    arrangeShips: \"Arrange Ships\",\n    arrangeShipsManual: \"Manual\",\n    arrangeShipsAuto: \"Automatic\",\n    remarkLBtn: \"Click left mouse button on the ship to select it\",\n    remarkRBtn: \"Click right mouse button on the ship to rotate it\",\n    playerTurn: \"Your turn!\",\n    compTurn: \"Computer turn!\",\n    begin: `Fight!`,\n    playerHits: \"Hit the target!\",\n    playerMissed: \"Miss the target!\",\n    compHits: \"Computer Hit the target!\",\n    compMissed: \"Computer Miss the target!\",\n    winPlayer: \"You Win!\",\n    winComp: \"Computer Win!\",\n  },\n};\n","export default __webpack_public_path__ + \"static/media/hit.8c96d676.mp3\";","export default __webpack_public_path__ + \"static/media/miss.b9a5893c.mp3\";","export default __webpack_public_path__ + \"static/media/fight.15e2f926.mp3\";","export default __webpack_public_path__ + \"static/media/winComp.f369007a.mp3\";","export default __webpack_public_path__ + \"static/media/winPlayer.4834e938.mp3\";","import React, { useEffect, useState } from \"react\";\n\nimport { store } from \"../App\";\nimport { message } from \"./message\";\n\nimport useSound from \"use-sound\";\nimport mp3Hit from \"../sound/hit.mp3\";\nimport mp3Miss from \"../sound/miss.mp3\";\nimport mp3Fight from \"../sound/fight.mp3\";\nimport mp3winComp from \"../sound/winComp.mp3\";\nimport mp3winPlayer from \"../sound/winPlayer.mp3\";\n\nexport const BattlefieldContext = React.createContext({});\n\nconst Provider = BattlefieldContext.Provider;\n\nexport default function ContextApp({ children }) {\n  const [arrangeShips, setArrangeShips] = useState(true);\n  const [arrangeShipsMode, setArrangeShipsMode] = useState(\"begin\");\n  const [playerBF, setPlayerBF] = useState(\n    Array(10)\n      .fill(\"-\")\n      .map(() => Array(10).fill(\"-\"))\n  );\n  const [compBF, setCompBF] = useState(\n    Array(10)\n      .fill(\"-\")\n      .map(() => Array(10).fill(\"-\"))\n  );\n  const [bfCoord, setBFcoord] = useState({});\n  const [playerShips, setPlayerShips] = useState(null);\n  const [compShips, setCompShips] = useState(null);\n  const [turn, setTurn] = useState(\"begin\"); // begin, player, comp\n  const [turnNum, setTurnNum] = useState(0);\n  const [lang, setLang] = useState(\n    window.navigator.language.includes(\"ru\") ? \"ru\" : \"en\"\n  );\n  const [timeMachine, setTimeMachine] = useState(false);\n\n  useEffect(() => {\n    if (turnNum > 0 && !timeMachine) {\n      let turnInfo = JSON.stringify({ playerBF, compBF });\n      store.dispatch({ type: \"ADD_TURN\", payload: turnInfo });\n    }\n  }, [turnNum]);\n\n  const [playHit] = useSound(mp3Hit);\n  const [playMiss] = useSound(mp3Miss);\n  const [playFight] = useSound(mp3Fight);\n  const [playWinComp] = useSound(mp3winComp);\n  const [playWinPlayer] = useSound(mp3winPlayer);\n\n  function checkWinner() {\n    if (turn.includes(\"comp\") || turn === \"player\") {\n      if ([...playerBF].flat().filter((el) => el === +el).length === 0) {\n        setTurn(\"winComp\");\n        playWinComp();\n      }\n      if ([...compBF].flat().filter((el) => el === +el).length === 0) {\n        setTurn(\"winPlayer\");\n        playWinPlayer();\n      }\n    }\n  }\n\n  function createShips() {\n    const data = [\n      [1, 4],\n      [2, 3],\n      [3, 2],\n      [4, 1],\n    ];\n    let n = 0;\n    for (let item of data)\n      for (let i = 0; i < item[0]; i++) {\n        let ship = { num: n++, length: item[1] };\n        setPlayerShips((prev) => (prev ? prev.concat(ship) : [ship]));\n        setCompShips((prev) => (prev ? prev.concat(ship) : [ship]));\n      }\n  }\n\n  function getRnd(i = 0) {\n    while (i < 1 || i > 10) {\n      i = Math.ceil(Math.random() * 10);\n    }\n    return i;\n  }\n\n  function getBFcoord(box) {\n    let data = {\n      top: box.top,\n      bottom: box.bottom,\n      left: box.left,\n      right: box.right,\n      width: box.width,\n      height: box.height,\n      gridCol: new Array(11)\n        .fill(0)\n        .map((el, idx) => box.left + (idx * box.width) / 10),\n      gridRow: new Array(11)\n        .fill(0)\n        .map((el, idx) => box.top + (idx * box.height) / 10),\n    };\n    setBFcoord(data);\n  }\n\n  useEffect(() => {\n    let elem = document\n      .querySelector(\".battlefield-pad\")\n      .getBoundingClientRect();\n    createShips();\n    getBFcoord(elem);\n  }, []);\n\n  useEffect(() => {\n    if (!arrangeShips) {\n      let box = document\n        .querySelectorAll(\".battlefield-pad\")[1]\n        .getBoundingClientRect();\n      getBFcoord(box);\n    }\n  }, [arrangeShips]);\n\n  return (\n    <Provider\n      value={{\n        arrangeShips,\n        setArrangeShips,\n        arrangeShipsMode,\n        setArrangeShipsMode,\n        playerBF,\n        setPlayerBF,\n        compBF,\n        setCompBF,\n        playerShips,\n        setPlayerShips,\n        compShips,\n        setCompShips,\n        bfCoord,\n        message,\n        lang,\n        setLang,\n        turn,\n        setTurn,\n        turnNum,\n        setTurnNum,\n        timeMachine,\n        setTimeMachine,\n        getRnd,\n        playHit,\n        playMiss,\n        playFight,\n        checkWinner,\n        store,\n      }}\n    >\n      {children}\n    </Provider>\n  );\n}\n","import React, { useState, useContext, useEffect } from \"react\";\nimport { BattlefieldContext } from \"./BattlefieldContext\";\nimport uuid from \"react-uuid\";\n\nexport default function Ship({ length, num }) {\n  const {\n    setPlayerShips,\n    setCompShips,\n    compBF,\n    setCompBF,\n    bfCoord,\n    playerBF,\n    setPlayerBF,\n    arrangeShipsMode,\n    getRnd,\n  } = useContext(BattlefieldContext);\n  const [orientY, setOrientY] = useState(\n    arrangeShipsMode !== \"auto\" ? false : Math.random() > 0.5\n  );\n\n  function checkSetShip(shipCol, shipRow, trg, comp) {\n    let putOk = true;\n    for (let i = 0; i < length; i++) {\n      try {\n        if (!comp) {\n          if (!orientY && playerBF[shipRow - 1][shipCol - 1 + i] !== \"-\")\n            putOk = false;\n          if (orientY && playerBF[shipRow - 1 + i][shipCol - 1] !== \"-\")\n            putOk = false;\n        } else {\n          if (!orientY && compBF[shipRow - 1][shipCol - 1 + i] !== \"-\")\n            putOk = false;\n          if (orientY && compBF[shipRow - 1 + i][shipCol - 1] !== \"-\")\n            putOk = false;\n        }\n      } catch (e) {\n        putOk = false;\n      }\n    }\n\n    if (putOk) {\n      let newBF = comp ? [...compBF] : [...playerBF];\n\n      for (let i = 0; i < length; i++) {\n        // set ship in array BF\n        if (!orientY) newBF[shipRow - 1][shipCol - 1 + i] = num;\n        else newBF[shipRow - 1 + i][shipCol - 1] = num;\n      }\n\n      for (let a = 0; a < 3; a++) {\n        for (let i = 0; i < length + 2; i++) {\n          // set ship's deadarea in array BF\n          let coordY, coordX;\n          if (!orientY) {\n            coordY = shipRow - 2 + a;\n            coordX = shipCol - 2 + i;\n          } else {\n            coordY = shipRow - 2 + i;\n            coordX = shipCol - 2 + a;\n          }\n\n          if (coordY < 0 || coordX < 0 || coordY > 9 || coordX > 9) continue;\n\n          let el = newBF[coordY][coordX];\n          if (el === undefined) continue;\n\n          if (el !== +el && el !== \"D\") {\n            newBF[coordY][coordX] = \"D\";\n          }\n        }\n      }\n\n      if (!comp) {\n        setPlayerBF(newBF);\n        setPlayerShips((prev) => prev.filter((el) => el.num !== num));\n      } else {\n        setCompBF(newBF);\n        setCompShips((prev) => prev.filter((el) => el.num !== num));\n      }\n      document.onmousemove = null;\n      if (trg) trg.onmouseup = null;\n    }\n\n    if (!putOk) {\n      // retry to set ship if bad position (auto set & comp bf)\n      if (!comp && arrangeShipsMode === \"auto\") {\n        checkSetShip(getRnd(), getRnd(), null);\n      } else if (comp) {\n        checkSetShip(getRnd(), getRnd(), null, true);\n      }\n    }\n  }\n\n  function handleShipMove(e) {\n    if (e.button !== 0) return;\n    let trg = e.target;\n    let box = trg.getBoundingClientRect();\n    let shiftX = e.pageX - box.left;\n    let shiftY = e.pageY - box.top;\n\n    trg.style.position = \"absolute\";\n    trg.style.zIndex = 9;\n\n    moveAt(e);\n\n    function moveAt(e) {\n      trg.style.left = e.pageX - shiftX + \"px\";\n      trg.style.top = e.pageY - shiftY + \"px\";\n    }\n\n    document.onmousemove = (e) => moveAt(e);\n\n    trg.onmouseup = function (e) {\n      let ship = e.target.closest(\".ship\").getBoundingClientRect();\n      let shipCol;\n      let shipRow;\n\n      for (let i = 0; i < bfCoord.gridCol.length - 1; i++) {\n        // get ship's start position Col & Row\n        if (ship.x >= bfCoord.gridCol[i] && ship.x <= bfCoord.gridCol[i + 1])\n          shipCol = i + 1;\n        if (ship.y >= bfCoord.gridRow[i] && ship.y <= bfCoord.gridRow[i + 1])\n          shipRow = i + 1;\n      }\n\n      if (\n        shipCol === undefined ||\n        shipRow === undefined ||\n        shipCol < 1 ||\n        shipRow < 1\n      )\n        return;\n\n      if (arrangeShipsMode !== \"auto\") checkSetShip(shipCol, shipRow, trg);\n    };\n  }\n\n  function handleRotate(ev) {\n    ev.preventDefault();\n    setOrientY((prev) => !prev);\n  }\n\n  useEffect(() => {\n    // auto set ships for Player and PC\n    if (arrangeShipsMode === \"auto\") {\n      setTimeout(() => {\n        let playerShipSet = playerBF.toString().includes(num);\n        if (!playerShipSet) checkSetShip(getRnd(), getRnd(), null);\n      }, num * 500);\n    }\n    let compShipSet = compBF.toString().includes(num);\n    if (!compShipSet) checkSetShip(getRnd(), getRnd(), null, true);\n  }, [playerBF, compBF]);\n\n  return (\n    <span\n      className=\"ship\"\n      id={uuid()}\n      style={\n        orientY\n          ? { width: 33, height: length * 33 }\n          : { width: length * 33, height: 33 }\n      }\n      onDragStart={() => {\n        return false;\n      }}\n      onMouseDown={handleShipMove}\n      onContextMenu={handleRotate}\n    />\n  );\n}\n","import React, { useEffect, useContext } from \"react\";\nimport { BattlefieldContext } from \"./BattlefieldContext\";\nimport uuid from \"react-uuid\";\nimport Ship from \"./Ship\";\n\nexport default function ArrangeShips() {\n  const {\n    lang,\n    message,\n    playerShips,\n    arrangeShipsMode,\n    setArrangeShipsMode,\n    setArrangeShips,\n  } = useContext(BattlefieldContext);\n\n  function handleKeyboard(ev) {\n    if (ev.key === \"1\") {\n        setArrangeShipsMode(\"manual\");\n    } else if (ev.key === \"2\") {\n        setArrangeShipsMode(\"auto\");\n    }\n  }\n\n  document.addEventListener(\"keydown\", handleKeyboard);\n\n  useEffect(() => {\n    if (playerShips && playerShips.length === 0)\n      setArrangeShipsMode(\"playerReady\");\n  }, [playerShips]);\n\n  useEffect(() => {\n    if (arrangeShipsMode === \"playerReady\") setArrangeShips(false);\n  }, [arrangeShipsMode]);\n\n  return (\n    <div className=\"battlefield-menu\">\n      {(arrangeShipsMode === \"begin\" ||\n        arrangeShipsMode === \"manual\" ||\n        arrangeShipsMode === \"auto\") && (\n        <p className=\"battlefield-menu--title\">\n          {message[lang].arrangeShips}\n          {lang === \"en\" && arrangeShipsMode !== \"begin\" && (\n            <span>: {arrangeShipsMode}</span>\n          )}\n          {lang === \"ru\" && arrangeShipsMode === \"manual\" && (\n            <span>: вручную</span>\n          )}\n          {lang === \"ru\" && arrangeShipsMode === \"auto\" && <span>: авто</span>}\n        </p>\n      )}\n\n      {arrangeShipsMode === \"manual\" && (\n        <span className=\"battlefield-menu--remark\">\n          {message[lang].remarkLBtn} <br />\n          {message[lang].remarkRBtn}\n        </span>\n      )}\n\n      {arrangeShipsMode === \"begin\" && (\n        <ul className=\"battlefield-menu--list\">\n          <li onClick={() => setArrangeShipsMode(\"manual\")}>\n            1) {message[lang].arrangeShipsManual}\n          </li>\n          <li onClick={() => setArrangeShipsMode(\"auto\")}>\n            2) {message[lang].arrangeShipsAuto}\n          </li>\n        </ul>\n      )}\n\n      {(arrangeShipsMode === \"manual\" || arrangeShipsMode === \"auto\") && (\n        <div className=\"battlefield-menu--ships\">\n          {playerShips.map((ship) => (\n            <Ship key={uuid()} length={ship.length} num={ship.num} />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useContext } from \"react\";\nimport uuid from \"react-uuid\";\nimport { BattlefieldContext } from \"./BattlefieldContext\";\n\nexport default function DrawIdx({ type }) {\n  const digits = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\n  const { lang } = useContext(BattlefieldContext);\n\n  return (\n    <div className={\"battlefield-\" + type}>\n      {digits.map((item) => (\n        <span\n          className=\"idx\"\n          key={uuid()}\n          style={type === \"digits\" ? { gridColumn: item } : { gridRow: item }}\n        >\n          {type === \"digits\"\n            ? item\n            : lang === \"ru\" \n            ? (item !== 10 ? String.fromCharCode(item + 1039) : \"К\")\n            : String.fromCharCode(item + 64)}\n        </span>\n      ))}\n    </div>\n  );\n}\n","import React, { useContext, useEffect, useState } from \"react\";\nimport uuid from \"react-uuid\";\n\nimport { BattlefieldContext } from \"./BattlefieldContext\";\n\nexport default function War() {\n  const {\n    message,\n    bfCoord,\n    checkWinner,\n    lang,\n    compBF,\n    setCompBF,\n    playerBF,\n    setPlayerBF,\n    getRnd,\n    turn,\n    setTurn,\n    turnNum,\n    setTurnNum,\n    playHit,\n    playMiss,\n    playFight,\n    store,\n    timeMachine,\n    setTimeMachine,\n  } = useContext(BattlefieldContext);\n  const [alarm, setAlarm] = useState(null);\n  const [compLastHit, setCompLastHit] = useState(null);\n  const pads = document.querySelectorAll(\".battlefield-pad\");\n\n  function turnBack() {\n    document.querySelector(\".App\").classList.toggle(\"darken\");\n    setTimeout(() => {\n      document.querySelector(\".App\").classList.toggle(\"darken\");\n    }, 1000);\n    setTimeMachine(true);\n    store.dispatch({ type: \"TURN_BACK\", payload: turnNum - 1 });\n\n    let storedBFs = store.getState().map((el) => JSON.parse(el));\n    let newBFs = storedBFs[storedBFs.length - 1];\n    let newPlayerBF = [...newBFs.playerBF];\n    let newCompBF = [...newBFs.compBF];\n    setPlayerBF(newPlayerBF);\n    setCompBF(newCompBF);\n    setTurnNum((prev) => prev - 1);\n    if (turn !== \"player\") setTurn(\"player\");\n  }\n\n  function shoot(ev) {\n    let x, y;\n    let evX = ev.clientX;\n    let evY = ev.clientY;\n\n    for (let i = 0; i < bfCoord.gridCol.length - 1; i++) {\n      // get player's shoot Col & Row\n      if (evX >= bfCoord.gridCol[i] && evX <= bfCoord.gridCol[i + 1]) x = i + 1;\n      if (evY >= bfCoord.gridRow[i] && evY <= bfCoord.gridRow[i + 1]) y = i + 1;\n    }\n\n    shootCheck(x, y);\n  }\n\n  function shootCheck(x, y) {\n    if (\n      [...playerBF].flat().filter((el) => el === +el).length === 0 ||\n      [...compBF].flat().filter((el) => el === +el).length === 0\n    ) {\n      checkWinner();\n      document.body.style.cursor = \"auto\";\n      pads[1].style.cursor = \"pointer\";\n      return;\n    }\n\n    if (!x || !y) {\n      x = getRnd();\n      y = getRnd();\n    }\n\n    if (turn.includes(\"comp\") && compLastHit !== null) {\n      // comp shoot second time the same ship\n      let playerBFstate = [...playerBF];\n\n      if (playerBFstate.flat().toString().includes(compLastHit)) {\n        if (Math.random() < 0.4) {\n          // chance <40%\n          let stop = false;\n          for (let i = 0; i < playerBFstate.length; i++) {\n            for (let j = 0; j < playerBFstate[i].length; j++) {\n              if (playerBFstate[i][j] === compLastHit && !stop) {\n                playHit();\n                playerBFstate[i][j] = \"X\";\n                let newState = turn + uuid();\n                setTurn(newState);\n                stop = true;\n              }\n            }\n          }\n          setCompLastHit(null);\n          setPlayerBF(playerBFstate);\n          return;\n        } else setCompLastHit(null);\n      }\n    }\n\n    let newBF = turn === \"player\" ? [...compBF] : [...playerBF];\n    let el = newBF[y - 1][x - 1];\n    if (+el === el) {\n      // hit the target\n      turn.includes(\"comp\") && setCompLastHit(el);\n      newBF[y - 1][x - 1] = \"X\";\n      playHit();\n      turn === \"player\" ? setCompBF(newBF) : setPlayerBF(newBF);\n      turn === \"player\" ? setAlarm(\"playerHits\") : setAlarm(\"compHits\");\n\n      if (turn.includes(\"comp\")) {\n        let newState = turn + uuid();\n        setTimeout(() => setTurn(newState), 999);\n      }\n    } else if (el === \"X\" || el === \"*\") {\n      // shoot second time the same point\n      if (turn.includes(\"comp\")) {\n        let newState = turn + uuid();\n        setTurn(newState);\n      }\n      return;\n    } else {\n      // miss the target\n      newBF[y - 1][x - 1] = \"*\";\n      playMiss();\n      turn === \"player\" ? setCompBF(newBF) : setPlayerBF(newBF);\n      turn === \"player\" ? setAlarm(\"playerMissed\") : setAlarm(\"compMissed\");\n      setTimeout(() => {\n        if (turn === \"player\") setTurn(\"comp\");\n        else if (turn.includes(\"comp\")) setTurn(\"player\");\n      }, 999);\n    }\n  }\n\n  useEffect(() => {\n    if (!turn.includes(\"player\")) {\n      try {\n        if (pads.length > 1) pads[1].removeEventListener(\"click\", shoot);\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n    if (!turn.includes(\"win\")) checkWinner();\n\n    if (turn === \"begin\") {\n      playFight();\n      setTimeout(setTurn.bind(null, \"player\"), 2000);\n    }\n\n    if (turn.includes(\"player\")) {\n      document.body.style.cursor = \"auto\";\n      pads[1].style.cursor = \"pointer\";\n      pads[1].addEventListener(\"click\", shoot);\n    }\n\n    if (turn.includes(\"comp\")) {\n      document.body.style.cursor = \"wait\";\n      pads[1].style.cursor = \"wait\";\n      shootCheck();\n    }\n  }, [turn]);\n\n  useEffect(() => alarm && setTimeout(() => setAlarm(null), 2000), [alarm]);\n\n  useEffect(() => {\n    !timeMachine && setTurnNum(store.getState().length + 1);\n    timeMachine && setTimeMachine(false);\n  }, [compBF]);\n\n  return (\n    <div>\n      <div className=\"time-machine--box\">\n        {turnNum > 1 && (\n          <button className=\"time-machine--back\" onClick={turnBack}>\n            &#10094;\n          </button>\n        )}\n        <div className=\"turn-counter\">{turnNum}</div>\n      </div>\n      <div className=\"war-info\">\n        {turn === \"begin\" && message[lang].begin}\n        {turn === \"player\" && message[lang].playerTurn}\n        {turn.includes(\"comp\") && message[lang].compTurn}\n        {turn === \"winComp\" && message[lang].winComp.toUpperCase()}\n        {turn === \"winPlayer\" && message[lang].winPlayer.toUpperCase()}\n        &nbsp;\n        {alarm === \"playerHits\" && message[lang].playerHits}\n        {alarm === \"playerMissed\" && message[lang].playerMissed}\n        {alarm === \"compHits\" && message[lang].compHits}\n        {alarm === \"compMissed\" && message[lang].compMissed}\n      </div>\n    </div>\n  );\n}\n","import React, { useContext } from \"react\";\nimport uuid from \"react-uuid\";\nimport { BattlefieldContext } from \"./BattlefieldContext\";\nimport ArrangeShips from \"./ArrangeShips\";\nimport DrawIdx from \"./DrawIdx\";\nimport War from \"./War\";\n\nexport default function Battlefield() {\n  const { message, lang, setLang, arrangeShips, playerBF, compBF } =\n    useContext(BattlefieldContext);\n\n  function handleLangBtn(ev) {\n    ev.target.classList.toggle(\"lang-en\");\n    lang === \"ru\" ? setLang(\"en\") : setLang(\"ru\");\n    if (ev.target.className.includes(\"lang-en\"))\n      document.title = message.en.gameTitle;\n    else document.title = message.ru.gameTitle;\n  }\n\n  return (\n    <div className=\"wrap\">\n      <button className=\"btn-lang\" onClick={handleLangBtn} />\n      <h1 className=\"app-title\">{message[lang].gameTitle}</h1>\n      <div className=\"container\">\n        <div className=\"battlefield\">\n          <DrawIdx type=\"digits\" />\n          <DrawIdx type=\"letters\" />\n          <div className=\"battlefield-pad\">\n            {playerBF.length === 10 &&\n              playerBF.flat().map((el) => (\n                <span\n                  className={\n                    +el === el\n                      ? \"shipEl\"\n                      : el === \"D\"\n                      ? \"deadarea\"\n                      : el === \"X\"\n                      ? \"hit\"\n                      : \"empty\"\n                  }\n                  key={uuid()}\n                >\n                  {el === \"*\" && el}\n                </span>\n              ))}\n          </div>\n        </div>\n\n        {arrangeShips && <ArrangeShips />}\n\n        {!arrangeShips && (\n          <div className=\"battlefield battlefield--comp\">\n            <DrawIdx type=\"digits\" />\n            <DrawIdx type=\"letters\" />\n            <div className=\"battlefield-pad\">\n              {compBF.length === 10 &&\n                compBF.flat().map((el) => (\n                  <span className={el === \"X\" ? \"hit\" : \"empty\"} key={uuid()}>\n                    {el === \"*\" && el}\n                  </span>\n                ))}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {!arrangeShips && <War />}\n\n      <footer className=\"footer\">\n        <a className=\"footer__link\" href=\"https://github.com/g5-freemen\">\n          Made by Anton Borkovskij, 2021\n        </a>\n      </footer>\n    </div>\n  );\n}\n","import \"./App.css\";\nimport ContextApp from \"./components/BattlefieldContext\";\nimport Battlefield from \"./components/Battlefield\";\nimport { createStore } from \"redux\";\n\nfunction timeMachine(state = [], action) {\n  if (action.type === \"ADD_TURN\") {\n    return [...state, action.payload];\n  } else if (action.type === \"TURN_BACK\") {\n    return [...state].filter((el, idx) => idx < action.payload);\n  }\n  return [...state];\n}\n\nexport const store = createStore(timeMachine);\n\nexport default function App() {\n  return (\n    <ContextApp>\n      <div className=\"App\">\n        <Battlefield />\n      </div>\n    </ContextApp>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <App />,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}